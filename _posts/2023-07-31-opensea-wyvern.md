---
title:  "OpenSea ê±°ë˜ ë°ì´í„° ë¶„ì„(Wyvern Protocol)"
categories:
  - backend
tags:
  - Blockchain
  - NFT
  - Data
  - OpenSea
toc: true
toc_icon: desktop
toc_label: "ëª©ì°¨"
toc_sticky: true
---
<div style="text-align: right;"><span style="font-size: 13px;">Token Engineering ì„œí˜„ì¤€</span></div>

# ë“¤ì–´ê°€ë©°

---

ìŸê¸€ì—ì„œëŠ” ë¸”ë¡ì²´ì¸ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë¸”ë¡ì²´ì¸ ê´€ë ¨ ì¢…ì‚¬ì ë° ë¸”ë¡ì²´ì¸ì— ê´€ì‹¬ì´ ìˆëŠ” ì‚¬ëŒë“¤ì—ê²Œ ì˜ë¯¸ ìˆëŠ” ë°ì´í„°ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ë¸”ë¡ì²´ì¸ì˜ ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ì´ë²ˆ ê¸€ì—ì„œëŠ” NFT ë§ˆì¼“ í”Œë ˆì´ìŠ¤ ì¤‘ ì„¸ê³„ ìµœëŒ€ ê±°ë˜ì†Œì¸ OpenSeaì˜ ê±°ë˜ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ë©°, ê° ë©”ì¸ë„·ë³„ NFT ê±°ë˜ ë°ì´í„° ì§€í‘œë¥¼ ë§Œë“¤ì—ˆë˜ ê²½í—˜ë“¤ ì¤‘ì—ì„œ OpenSea ì´ˆê¸° ê±°ë˜ í”„ë¡œí† ì½œì¸ Wyvern Protocolì˜ ê±°ë˜ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•˜ê² ìŠµë‹ˆë‹¤.

ì´ë²ˆ ê¸€ì—ì„œëŠ” ë°ì´í„° ë¶„ì„ì„ ìœ„í•œ ê¸°ë³¸ ì§€ì‹ ì„¤ëª…ê³¼ Wyvern í”„ë¡œí† ì½œì„ í†µí•œ ê±°ë˜ ë°ì´í„° ë¶„ì„ì— ëŒ€í•´ ì„¤ëª…í•˜ê³ ì í•©ë‹ˆë‹¤.

ë“¤ì–´ê°€ê¸°ì— ì•ì„œ, OpenSeaê°€ í˜„ì¬ ì§€ì›í•˜ëŠ” ë©”ì¸ë„·ê³¼ ê±°ë˜ í”„ë¡œí† ì½œì˜ ì¢…ë¥˜ë¥¼ ì‚´í´ë³¼ ì˜ˆì •ì…ë‹ˆë‹¤.

ë³¸ ê¸€ì—ì„œ ì‚¬ìš©ëœ OpenSea ë°ì´í„° ë¶„ì„ì— í™œìš©ëœ ë°ì´í„°ëŠ” Ethereum ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

# OpenSea ë§ˆì¼“ í”Œë ˆì´ìŠ¤ì—ì„œ ì§€ì›í•˜ëŠ” ë©”ì¸ë„·

---

OpenSeaëŠ” ì´ˆê¸° Ethereum ê±°ë˜ë¥¼ ì§€ì›í–ˆìœ¼ë©°, ë‹¤ë¥¸ ë©”ì¸ë„·ë„ ë¹„ìŠ·í•œ ì‹œê¸°ì— ì¶”ê°€ë˜ê±°ë‚˜ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ í•˜ë‚˜ì”© ë©”ì¸ë„· ì§€ì›ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ëŠ” Arbitrum, Avalanche, BNB Chain, Ethereum, Klaytn, Optimism, Polygon, Solana, Zora ë“±ì˜ ë©”ì¸ë„·ì—ì„œ ì´ˆê¸°ì—ëŠ” Wyvern Protocol, í˜„ì¬ëŠ” Seaport Protocolì„ í†µí•´ ê±°ë˜ê°€ ì´ë£¨ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤.

# OpenSea ë§ˆì¼“ í”Œë ˆì´ìŠ¤ì˜ ê±°ë˜ í”„ë¡œí† ì½œ

---

OpenSeaëŠ” 2018ë…„ 6ì›” 12ì¼(UTC+0) OpenSea Deployerë¥¼ í†µí•´ Wyvern Protocolì„ ì¶œì‹œí•˜ì˜€ìœ¼ë©°, 2018ë…„ 6ì›” 13ì¼(UTC+0) ì²« ê±°ë˜ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ì´í›„, 2022ë…„ 2ì›” 18ì¼(UTC+0) EIP712 ì„œëª…ì„ í†µí•œ ê±°ë˜ ë°ì´í„° íˆ¬ëª…ì„± í™•ë³´ ë° ì·¨ì•½ì  ê·¹ë³µì„ ìœ„í•´ ìƒˆë¡œìš´ ë²„ì „ì˜ Wyvern Protocolì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.

ê·¸ í›„, NFT ê±°ë˜ê°€ í™œë°œí•´ì§€ë©´ì„œ ìˆ˜ìˆ˜ë£Œ ë¬¸ì œê°€ ë…¼ë€ì´ ë˜ì—ˆê³ , OpenSeaëŠ” ê°€ìŠ¤ë¹„ ìµœì í™” ì‘ì—…ì„ í†µí•´ ìƒˆë¡œìš´ ê±°ë˜ í”„ë¡œí† ì½œì„ ë°œí‘œí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. Seaport Protocolì€ ë°”ì´íŠ¸ ì½”ë“œ ë ˆë²¨ì—ì„œì˜ ê°€ìŠ¤ë¹„ ìµœì í™” ì²˜ë¦¬ë¡œ ê°€ìŠ¤ë¹„ ì ˆê°ì„ í†µí•´ ìµœì í™”ê°€ ì´ë£¨ì–´ì¡Œìœ¼ë©°, 2022ë…„ 6ì›” 11ì¼(UTC+0) OpenSea Deployerë¥¼ í†µí•´ ìƒˆë¡œìš´ ê±°ë˜ í”„ë¡œí† ì½œë¡œ ë°œí‘œë˜ì—ˆìŠµë‹ˆë‹¤. OpenSeaì˜ ìƒˆ ê±°ë˜ í”„ë¡œí† ì½œì¸ SeaportëŠ” 2022ë…„ 6ì›” 12ì¼(UTC+0) ì²« ê±°ë˜ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.

ì´í›„ ë‹¤ì–‘í•œ ê¸°ëŠ¥ ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ í˜„ì¬(2023ë…„ 7ì›” 31ì¼(UTC+0)) ê¸°ì¤€ìœ¼ë¡œ Seaport 1.5 ë²„ì „ê¹Œì§€ ì¶œì‹œë˜ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ëŠ” Seaport Protocolì„ ê³„ì† í–¥ìƒì‹œí‚¤ë©´ì„œ Seaport Protocolì„ í†µí•´ ê±°ë˜ê°€ ì´ë£¨ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤.

**í‘œ 1. OpenSea í”„ë¡œí† ì½œ(Contract)ë³„ ê±°ë˜ ì¼ì**

| Name | Address | Created by Tx Hash | Created Date(UTC+0) | Start Trade Date(UTC+0) | End Trade Date(UTC+0) |
| --- | --- | --- | --- | --- | --- |
| OpenSea: Wyvern Exchange (v1) | 0x7be8076f4ea4a4ad08075c2508e481d6c946d12b | 0xebe6bd9d1da992b9a6f816564eafef42e9bf68d3876fae22556cc63da6fc0f66 | 2018-06-12 | 2018-06-13 | 2022-02-25 |
| OpenSea: Wyvern Exchange2.3 (v2) | 0x7f268357a8c2552623316e2562d90e642bb538e5 | 0xb387cc66173783ef9faef775d4b7eaaff3fdd47e765239d5ffb7633ec0be665b | 2022-02-01 | 2022-02-18 | 2022-08-01 |
| OpenSea: seaport1.1 (v3) | 0x00000000006c3852cbef3e08e8df289169ede581 | 0x34a28a0111a238347fe30a6c91b00437f8438357427c5e759a2f7577afe65144 | 2022-06-11 | 2022-06-12 | continue |
| OpenSea: seaport1.2 | 0x00000000000006c7676171937c444f6bde3d6282 | 0xadc7728fd231c4d6118ca2409d4fceef5be4028ef9049b0dffc2ae9c326e9f00 | 2023-01-31 | 2023-02-09 | 2023-02-21 |
| OpenSea: seaport1.3 | 0x0000000000000ad24e80fd803c6ac37206a45f15 | 0xd3d4aec88ee9feedd880eca79642b0a1ecf1a678f1e89b07c760c1a667b7206c | 2023-02-16 | 2023-02-16 | 2023-02-16 |
| OpenSea: seaport1.4 | 0x00000000000001ad428e4906ae43d8f9852d0dd6 | 0x4f5eae3d221fe4a572d722a57c2fbfd252139e7580b7959d93eb2a8b05b666f6 | 2023-02-18 | 2023-02-21 | continue |
| OpenSea: seaport1.5 (v4) | 0x00000000000000adc04c56bf30ac9d3c0aaf14dc | 0xa7f75a8b23c0f3150b7116aae930101f42996cb35e3e596a646156926350933a | 2023-04-26 | 2023-04-27 | continue |

# ì‚¬ì „ ë°°ê²½ ì§€ì‹

---

ë³¸ê²©ì ìœ¼ë¡œ Wyvern Protocolì˜ ê±°ë˜ ë°ì´í„° ë¶„ì„ì— ì•ì„œ, ì•Œì•„ì•¼ í•  ê¸°ë³¸ ì§€ì‹ì„ ëª‡ ê°€ì§€ ì„¤ëª…í•˜ê³ ì í•©ë‹ˆë‹¤.

## Smart Contractì˜ Functionê³¼ Event

---

ë¸”ë¡ì²´ì¸ ë‚´ì—ì„œ Ethereumê³¼ ê°™ì€ ê²½ìš°, Smart Contractë¼ëŠ” ë¸”ë¡ì²´ì¸ ë‚´ì˜ í”„ë¡œê·¸ë¨ì„ í†µí•´ íŠ¹ì • í–‰ìœ„ê°€ ì‹¤í–‰ë˜ê³  ê¸°ë¡ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ í–‰ìœ„ì—ëŠ” NFT ê±°ë˜, ì„œëª… ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤. Smart ContractëŠ” ë¸”ë¡ì²´ì¸ ë‚´ì—ì„œ íŠ¹ì • ì£¼ì†Œì— ìƒì£¼í•˜ëŠ” ì½”ë“œ(ê¸°ëŠ¥) ë° ë°ì´í„°(ìƒíƒœ)ì˜ ëª¨ìŒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ Smart ContractëŠ” í¬ê²Œ Functionê³¼ Eventë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.

Functionì€ Smart Contractê°€ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” íŠ¹ì • ì‘ì—… ë˜ëŠ” ì‘ì—…ì„ ì •ì˜í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤. ì´ëŠ” ê¸°ì¡´ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì˜ ë©”ì„œë“œì™€ ê°™ë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì…ë ¥ì„ ë°›ê³ , ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³ , ì¶œë ¥ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ Smart Contractì˜ functionì€ ë¸”ë¡ì²´ì¸ ë‚´ì—ì„œ íŠ¸ëœì­ì…˜ì„ ìˆ˜í–‰ ì‹œ Smart Contractì˜ íŠ¹ì • Functionì„ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

EventëŠ” Smart Contract ë‚´ì—ì„œ ë°œìƒí•˜ëŠ” íŠ¹ì • ì‚¬ê±´ì˜ ë°œìƒ ë˜ëŠ” ë³€ê²½ ì‚¬í•­ì„ ì „ë‹¬í•˜ê³  ê¸°ë¡í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

ìš”ì•½í•˜ë©´ Smart Contractì˜ Functionì€ Smart Contractì˜ ë™ì‘ê³¼ ì‘ì—…ì„ ì •ì˜í•˜ê³ , EventëŠ” Smart Contract ë‚´ íŠ¹ì • ì‚¬ê±´ì˜ ë°œìƒì— ëŒ€í•´ ì™¸ë¶€ ê´€ì°°ìì—ê²Œ ì•Œë¦¬ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

<aside>
ğŸ’¡ NFT ê±°ë˜ ë°ì´í„°ëŠ” Functionì„ í†µí•´ ë¶„ì„í•  ìˆ˜ë„ ìˆì§€ë§Œ, ë³¸ ê¸€ì—ì„œëŠ” Event ì •ë³´ë¥¼ í†µí•´ NFT ê±°ë˜ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

</aside>

## Event

---

Event ë°ì´í„°ë¥¼ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í¬ê²Œ 2ê°€ì§€ë¥¼ ì•Œê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

ì²«ì§¸ë¡œ, EVM ê³„ì—´ì˜ Event Logì˜ í˜•íƒœë¥¼ ì•Œê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. Event Logì˜ ë°ì´í„°ë¥¼ í†µí•´ OpenSeaì˜ Smart Contractë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë£¨ì–´ì§„ ê±°ë˜ ë°ì´í„°ë§Œì„ ë„ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‘˜ì§¸ë¡œ, NFT ê±°ë˜ë¥¼ ìœ„í•´ ì•Œì•„ì•¼ í•˜ëŠ” ê¸°ë³¸ì ì¸ ê²ƒìœ¼ë¡œ ê±°ë˜ í†µí™” ìˆ˜ë‹¨ì´ ë˜ëŠ” ERC20ê³¼ ê±°ë˜ì˜ ëŒ€ìƒì´ ë˜ëŠ” NFTì˜ ì¢…ë¥˜ì¸ ERC721, ERC1155ì˜ ê¸°ë³¸ Event ì¢…ë¥˜ë¥¼ ì•Œê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

ì…‹ì§¸ë¡œ, Wyvern í”„ë¡œí† ì½œì˜ ì£¼ìš” Event í˜•íƒœë¥¼ íŒŒì•…í•´ì•¼ í•©ë‹ˆë‹¤.

### Event Log

Transaction Receipt ë°ì´í„°ì˜ Logs ë°ì´í„°ì˜ í˜•íƒœë¥¼ ë³´ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ì•„ë˜ í‘œì™€ ê°™ì€ ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê° ë°ì´í„°ì˜ ì˜ë¯¸ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

**í‘œ 2. ethereum logsì˜ í•„ë“œ ì„¤ëª…**

| í•„ë“œ | ì„¤ëª… |
| --- | --- |
| contract address | wyvern, seaport ë“±ì˜ protocol address, nft address, token address ë“± |
| topic0 | Event Nameì˜ hex signature |
| topic1 | indexed param |
| topic2 | indexed param |
| topic3 | indexed param |
| data | indexedê°€ ì•„ë‹Œ paramì„ í•˜ë‚˜ë¡œ í•©ì¹œ data |
| index | í•´ë‹¹ eventê°€ ë°œìƒí•œ txë‚´ì—ì„œ eventì˜ index |
| block hash | í•´ë‹¹ eventê°€ ë°œìƒí•œ txê°€ ë‹´ê¸´ blockì˜ hash |
| block number | í•´ë‹¹ eventê°€ ë°œìƒí•œ txê°€ ë‹´ê¸´ blockì˜ number |
| block time | í•´ë‹¹ eventê°€ ë°œìƒí•œ txê°€ ë‹´ê¸´ blockì˜ time |
| tx hash | í•´ë‹¹ eventê°€ ë°œìƒí•œ txì˜ hash |
| tx index | í•´ë‹¹ eventê°€ ë‹´ê¸´ blockë‚´ì—ì„œ txì˜ index |
| tx from | í•´ë‹¹ eventê°€ ë‹´ê¸´ blockë‚´ì—ì„œ txì˜ from address |
| tx to | í•´ë‹¹ eventê°€ ë‹´ê¸´ blockë‚´ì—ì„œ txì˜ to address |

### ERC20

ERC20ì˜ Smart Contractë¥¼ ì‚´í´ë³´ë©´ Transferì™€ Approval Eventë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

**Transfer**

íŠ¹ì§•: `indexed` í•„ë“œëŠ” `from`, `to`

```solidity
/**
	MUST trigger when tokens are transferred, including zero value transfers.

	A token contract which creates new tokens SHOULD trigger a Transfer event with the _from address set to 0x0 when tokens are created.
*/
event Transfer(
  address indexed from,
  address indexed to,
  uint256 value
);
```

**Approval**

íŠ¹ì§•: `indexed` í•„ë“œëŠ” `owner`, `spender`

```solidity
/**
	MUST trigger on any successful call to approve(address _spender, uint256 _value).
*/
event Approval(
  address indexed owner,
  address indexed spender,
  uint256 value
);
```

### ERC721

ERC721ì˜ Smart Contractë¥¼ ì‚´í´ë³´ë©´ Transferì™€ Approval, ApprovalForAll Eventë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

**Transfer**

íŠ¹ì§•: `indexed` í•„ë“œëŠ” `_from`, `_to`, `_tokenId`

```solidity
/// @dev This emits when ownership of any NFT changes by any mechanism.
///  This event emits when NFTs are created (`from` == 0) and destroyed
///  (`to` == 0). Exception: during contract creation, any number of NFTs
///  may be created and assigned without emitting Transfer. At the time of
///  any transfer, the approved address for that NFT (if any) is reset to none.
event Transfer(
  address indexed _from,
  address indexed _to,
  uint256 indexed _tokenId
);
```

**Approval**

íŠ¹ì§•: `indexed` í•„ë“œëŠ” `_owner`, `_approved`, `_tokenId`

```solidity
/// @dev This emits when the approved address for an NFT is changed or
///  reaffirmed. The zero address indicates there is no approved address.
///  When a Transfer event emits, this also indicates that the approved
///  address for that NFT (if any) is reset to none.
event Approval(
  address indexed _owner,
  address indexed _approved,
  uint256 indexed _tokenId
);
```

íŠ¹ì§•: `indexed` í•„ë“œëŠ” `_owner`, `_operator`

**ApprovalForAll**

```solidity
/// @dev This emits when an operator is enabled or disabled for an owner.
///  The operator can manage all NFTs of the owner.
event ApprovalForAll(
	address indexed _owner,
	address indexed _operator,
	bool _approved
);
```

### ERC1155

ERC1155ì˜ Smart Contractë¥¼ ì‚´í´ë³´ë©´ TransferSingleê³¼ TransferBatch, ApprovalForAll, URI Eventë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

**TransferSingle**

íŠ¹ì§•: `indexed` í•„ë“œëŠ” `_operator`, `_from`, `_to`

```solidity
/**
	@dev Either `TransferSingle` or `TransferBatch` MUST emit when tokens are transferred, including zero value transfers as well as minting or burning (see "Safe Transfer Rules" section of the standard).
	The `_operator` argument MUST be the address of an account/contract that is approved to make the transfer (SHOULD be msg.sender).
	The `_from` argument MUST be the address of the holder whose balance is decreased.
	The `_to` argument MUST be the address of the recipient whose balance is increased.
	The `_id` argument MUST be the token type being transferred.
	The `_value` argument MUST be the number of tokens the holder balance is decreased by and match what the recipient balance is increased by.
	When minting/creating tokens, the `_from` argument MUST be set to `0x0` (i.e. zero address).
	When burning/destroying tokens, the `_to` argument MUST be set to `0x0` (i.e. zero address).        
*/
event TransferSingle(
	address indexed _operator,
	address indexed _from,
	address indexed _to,
	uint256 _id,
	uint256 _value
);
```

**TransferBatch**

íŠ¹ì§•: `indexed` í•„ë“œëŠ” `_operator`, `_from`, `_to`

```solidity
/**
	@dev Either `TransferSingle` or `TransferBatch` MUST emit when tokens are transferred, including zero value transfers as well as minting or burning (see "Safe Transfer Rules" section of the standard).      
	The `_operator` argument MUST be the address of an account/contract that is approved to make the transfer (SHOULD be msg.sender).
	The `_from` argument MUST be the address of the holder whose balance is decreased.
	The `_to` argument MUST be the address of the recipient whose balance is increased.
	The `_ids` argument MUST be the list of tokens being transferred.
	The `_values` argument MUST be the list of number of tokens (matching the list and order of tokens specified in _ids) the holder balance is decreased by and match what the recipient balance is increased by.
	When minting/creating tokens, the `_from` argument MUST be set to `0x0` (i.e. zero address).
	When burning/destroying tokens, the `_to` argument MUST be set to `0x0` (i.e. zero address).                
*/
event TransferBatch(
	address indexed _operator,
	address indexed _from,
	address indexed _to,
	uint256[] _ids,
	uint256[] _values
);
```

**ApprovalForAll**

íŠ¹ì§•: `indexed` í•„ë“œëŠ” `_owner`, `_operator`

```solidity
/**
	@dev MUST emit when approval for a second party/operator address to manage all tokens for an owner address is enabled or disabled (absence of an event assumes disabled).        
*/
event ApprovalForAll(
	address indexed _owner,
	address indexed _operator,
	bool _approved
);
```

**URI**

íŠ¹ì§•: `indexed` í•„ë“œëŠ” `_id`

```solidity
/**
	@dev MUST emit when the URI is updated for a token ID.
	URIs are defined in RFC 3986.
	The URI MUST point to a JSON file that conforms to the "ERC-1155 Metadata URI JSON Schema".
*/
event URI(
	string _value,
	uint256 indexed _id
);
```

### Wyvern Protocol

Wyvern Protocolì˜ Smart Contractë¥¼ ì‚´í´ë³´ë©´ ë§ì€ ì´ë²¤íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê·¸ ì¤‘ ê±°ë˜ ë‚´ì—­ì„ ë³¼ ìˆ˜ ìˆëŠ” OrdersMatchedì— ì§‘ì¤‘í•˜ê² ìŠµë‹ˆë‹¤.

**OrdersMatched**

- OrdersMatchedë€ ê±°ë˜ê°€ ìˆ˜í–‰ëœ ë‚´ì—­, ì¦‰ ì˜ìˆ˜ì¦ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê±°ë˜ì— ëŒ€í•œ íˆìŠ¤í† ë¦¬ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- íŠ¹ì§•: `indexed` í•„ë“œëŠ” `maker`, `taker`, `metadata`

```solidity
/* Log match event. */
emit OrdersMatched(
	buyHash,
	sellHash,
	sell.feeRecipient != address(0) ? sell.maker : buy.maker,
	sell.feeRecipient != address(0) ? buy.maker : sell.maker,
	price,
	metadata
);

event OrdersMatched(
	bytes32 buyHash,
	bytes32 sellHash,
	address indexed maker,
	address indexed taker,
	uint price,
	bytes32 indexed metadata
);
```

# ë³¸ê²©ì ì¸ Wyvern Protocolì˜ ê±°ë˜ ë°ì´í„° ìˆ˜ì§‘, ë¶„ì„, ì ì¬ ë°©ë²•

---

ë³¸ê²©ì ìœ¼ë¡œ Wyvern Protocolì˜ ê±°ë˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘, ë¶„ì„, ì ì¬í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. NFT ê±°ë˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ì„œëŠ” ì‚¬ì „ì— block, transaction, log ë°ì´í„°ê°€ ìˆ˜ì§‘ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. í•´ë‹¹ ë°ì´í„°ë“¤ê³¼ ì•„ë˜ì™€ ê°™ì€ ìˆ˜ì§‘ ê³¼ì •ë“¤ì„ ì‚´í´ë³´ê³ ì í•œë‹¤ë©´ Duneì—ì„œ ì‹¤ì œ Ethereum ë°ì´í„°ë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Wyvern Protocolì˜ ê±°ë˜ ë°ì´í„° ìˆ˜ì§‘

---

Wyvern Protocolì˜ ê±°ë˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê¸° ì•ì„œ, Ethereumì˜ Log ë°ì´í„°ê°€ ê°–ì¶°ì ¸ì•¼ í•©ë‹ˆë‹¤. Log ë°ì´í„°ë¥¼ í† ëŒ€ë¡œ íŠ¹ì • ì£¼ê¸°(ë³¸ ê¸€ì—ì„œëŠ” ì¼ì)ë³„ë¡œ Wyvern Protocolì˜ ê±°ë˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.

1. íŠ¹ì • ê¸°ê°„ ë‚´ì— Contract Address(ì´í•˜ CA)ê°€ Wyvern Protocolì˜ CAì´ë©´ì„œ, topic0ì´ OrdersMatchedì¸(topic0ì€ event nameì˜ hexê°’ì´ë¯€ë¡œ) tx_hashë¥¼ group by í•˜ì—¬, distinctí•œ tx_hashë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.
    - ê¸°ê°„ì€ ì‹œê°„ ë‹¨ìœ„ë¡œ ìŠ¤ì¼€ì¤„ë§ í•  ìˆ˜ë„ ìˆê³ , í•˜ë£¨ ë‹¨ìœ„ë¡œ ìŠ¤ì¼€ì¤„ë§ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Wyvern ë²„ì „ì— ë”°ë¼ ê° CAë¥¼ í†µí•´ ê±°ë˜ëœ ê¸°ê°„ ë‚´ì— ì¡°íšŒë¥¼ í•´ì•¼ í•©ë‹ˆë‹¤.
    - CAëŠ” Wyvern Protocolì˜ ë²„ì „ì— ë”°ë¼ ê±°ë˜ëœ ê¸°ê°„ê³¼ ë§¤ì¹˜í•˜ì—¬ ì„¤ì •í•©ë‹ˆë‹¤.
    - topic0ëŠ” Wyvern Protocolì—ì„œëŠ” OrdersMatchedë¡œ ê³ ì •í•©ë‹ˆë‹¤. ë‹¨, hex signatureì´ë¯€ë¡œ, ë³¸ ê¸€ì˜ í•˜ë‹¨ì— **Event Name Hex Signature**ë¥¼ ì°¸ê³ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.
    
    ex) query
    
    ```sql
    SELECT tx_hash FROM ethereum.logs
    WHERE block_time >= '2022-03-01 00:00:00' AND block_time < '2022-03-01 24:00:00'
    		AND contract_address = '0x7f268357a8c2552623316e2562d90e642bb538e5'
    		AND topic1 = '0xc4109843e0b7d514e4c093114b863f8e7d8d9a458c372cd51bfe526b588006c9'
    GROUP BY tx_hash;
    ```
    
2. 1ë²ˆì—ì„œ ì¿¼ë¦¬ ê²°ê³¼ë¡œ ë‚˜ì˜¨ tx_hashì˜ ê°’ì„ ë°˜ë³µí•˜ë©° í•´ë‹¹ tx_hashì— í¬í•¨ëœ Logs ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ë°ì´í„° ë¶„ì„ ë° ì ì¬ ë‹¨ê³„ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.
    
    ex) query
    
    ```sql
    SELECT * FROM ethereum.logs WHERE block_time >= '2022-03-01 00:00:00' AND block_time < '2022-03-01 24:00:00' AND tx_hash = '0x3de1b78d00e5afcffc1999ff94f0bc8934324620d02fa15bac018c78648b7850' ORDER BY index;
    ```
    

## Wyvern Protocolì˜ ê±°ë˜ ë°ì´í„° ë¶„ì„ ë° ì ì¬

---

NFT ê±°ë˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ í…Œì´ë¸”ì„ ëª¨ë¸ë§í•˜ê³ , ì´ ë°ì´í„°ë¥¼ ì±„ìš°ê¸° ìœ„í•œ ë¡œì§ì„ ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤. NFT ê±°ë˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ í…Œì´ë¸”ì€ duneì˜ ì´ˆê¸° nft_trades í…Œì´ë¸”ì„ ìƒ˜í”Œë¡œ ì‚¬ìš©í•˜ì—¬ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.

**í‘œ 3. nft_trades í…Œì´ë¸” sample**

| id | field | type | ì„¤ëª… |
| --- | --- | --- | --- |
| 1 | block_time | timestamp | í•´ë‹¹ ê±°ë˜ì˜ ë¸”ë¡ ìƒì„± ì‹œê°„ |
| 2 | tx_hash | bytea | í•´ë‹¹ ê±°ë˜ì˜ tx hash |
| 3 | block_number | int4 | í•´ë‹¹ ê±°ë˜ì˜ block ë²ˆí˜¸ |
| 4 | evt_index | int4 | í•´ë‹¹ ê±°ë˜ì˜ tx ë‚´ì˜ evt index |
| 5 | tx_from | bytea | í•´ë‹¹ ê±°ë˜ì˜ txì˜ from address |
| 6 | tx_to | bytea | í•´ë‹¹ ê±°ë˜ì˜ txì˜ to address |
| 7 | trace_address | _int4 | í•´ë‹¹ ê±°ë˜ì˜ traceì˜ index |
| 8 | seller | bytea | nft itemì˜ íŒë§¤ì |
| 9 | buyer | bytea | nft itemì˜ êµ¬ë§¤ì |
| 10 | nft_token_id | text | nft tokenì˜ id |
| 11 | erc_standard | text | ERC721, ERC1155 |
| 12 | nft_contract_address | bytea | nft tokenì˜ CA |
| 13 | nft_project_name | text | nft projectì˜ ì´ë¦„ |
| 14 | number_of_items | int4 | ê±°ë˜ëœ nft item ê°œìˆ˜ |
| 15 | trade_type | text | Single Item Trade, Bundle Trade |
| 16 | nft_token_ids_array | _text | Bundle ê±°ë˜ì¸ ê²½ìš° nft tokenì˜ id ë¦¬ìŠ¤íŠ¸ |
| 17 | senders_array | _bytea | Bundle ê±°ë˜ì¸ ê²½ìš° nft tokenì˜ sender ë¦¬ìŠ¤íŠ¸ |
| 18 | recipients_array | _bytea | Bundle ê±°ë˜ì¸ ê²½ìš° nft tokenì˜ receipient ë¦¬ìŠ¤íŠ¸ |
| 19 | erc_types_array | _text | Bundle ê±°ë˜ì¸ ê²½ìš° nft tokenì˜ erc types ë¦¬ìŠ¤íŠ¸ |
| 20 | nft_contract_addresses_array | _bytea | Bundle ê±°ë˜ì¸ ê²½ìš° nft tokenì˜ nft CA ë¦¬ìŠ¤íŠ¸ |
| 21 | erc_values_array | _numeric | Bundle ê±°ë˜ì¸ ê²½ìš° nft tokenì˜ erc value ë¦¬ìŠ¤íŠ¸ |
| 22 | original_currency | text | nft itemì„ êµ¬ë§¤í•œ currency(ERC20) |
| 23 | original_currency_contract | bytea | nft itemì„ êµ¬ë§¤í•œ original currency(ERC20)ì˜ CA |
| 24 | currency_contract | bytea | nft itemì„ êµ¬ë§¤í•œ currency(ERC20)ì˜ CA |
| 25 | platform | text | OpenSea |
| 26 | evt_type | text | Trade |
| 27 | category | text | Buy, Sell |
| 28 | exchange_contract_address | bytea | OpenSea ê±°ë˜ í”„ë¡œí† ì½œì˜ CA(ì—¬ê¸°ì„œëŠ” Wyvernì˜ CA) |
| 29 | platform_version | text | ê±°ë˜ protocol ë²„ì „ |
| 30 | original_amount_raw | numeric(54, 18) | nft itemì„ êµ¬ë§¤í•œ currency í† í°ì˜ ì–‘ |
| 31 | original_amount | numeric(54, 18) | nft itemì„ êµ¬ë§¤í•œ currency í† í°ì„ í•´ë‹¹ í† í°ì˜ decimalsë¡œ ë‚˜ëˆˆ ê°’ |
| 32 | usd_amount | numeric(54, 18)  | nft itemì˜ usd ê°€ê²© |
| 33 | trade_id | int4 | í•´ë‹¹ ê±°ë˜ì˜ trade id |

### ê¸°ë³¸ ë©”ì»¤ë‹ˆì¦˜

---

NFT ë°ì´í„° ë¶„ì„ ë° ì ì¬ëŠ” Log ë°ì´í„°ì—ì„œ topic0(Event Name)ì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤. Wyvernì—ì„œëŠ” Transfer, TransferSingle, OrdersMatched Eventë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. Wyvern CAì— ëŒ€í•œ Logë“¤ì„ ë¶„ì„í•˜ë©´ ERC721 ê±°ë˜ì— ëŒ€í•œ TransferBatch EventëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ Transfer, TransferSingle, OrdersMatched Eventë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìœ„ í…Œì´ë¸”ì˜ ë°ì´í„°ê°€ í™•ë³´ë˜ë©´ í•˜ë‚˜ì˜ ê±°ë˜ ë°ì´í„°ë¥¼ ìƒì„±í•˜ì—¬ í…Œì´ë¸”ì— ì ì¬í•©ë‹ˆë‹¤.

<aside>
ğŸ’¡ ìœ„ì˜ ê±°ë˜ ë°ì´í„° ìˆ˜ì§‘ì—ì„œ ê°€ì ¸ì˜¨ tx hashì˜ Log ë¦¬ìŠ¤íŠ¸ë¥¼ Event Index ê¸°ì¤€ìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•˜ë©´ Approval - Transfer ë˜ëŠ” TransferSingle - OrdersMatched ìˆœì„œëŒ€ë¡œ ë‚˜ì˜¨ë‹¤ëŠ” ê²ƒì„ ë³´ì¥í•©ë‹ˆë‹¤.

</aside>

**ì™¸ë¶€ í…Œì´ë¸” ì°¸ì¡°(blocks, transactions, logs)**

<aside>
<img src="https://www.notion.so/icons/sign-out_green.svg" alt="https://www.notion.so/icons/sign-out_green.svg" width="40px" /> 1. block_time
2. tx_hash
3. block_number
4. evt_index
- 1~4 dataëŠ” ethereum.logs í…Œì´ë¸”ì— ìˆëŠ” ì •ë³´ë¡œ ì„¸íŒ…

5. tx_from
6. tx_to
- 5~6 dataëŠ” ethereum.transactions í…Œì´ë¸”ì— ìˆëŠ” ì •ë³´ë¡œ ì„¸íŒ…

7. trace_address
- 7 dataëŠ” ethereum.traces í…Œì´ë¸”ì— ìˆëŠ” ì •ë³´ë¡œ ì„¸íŒ…

</aside>

**Transfer**

- Transfer ì´ë²¤íŠ¸ëŠ” ERC20, ERC721 ë‘ ê°œì— ëª¨ë‘ ìˆê¸° ë•Œë¬¸ì— êµ¬ë¶„í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. Topicì´ 4ê°œê¹Œì§€ ìˆìœ¼ë©´ ERC721, 3ê°œë©´ ERC20ìœ¼ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤.
- Topic1, Topic2, Topic3 ë‹¤ ë¹„ì–´ìˆê±°ë‚˜, ë‹¤ ì±„ì›Œì ¸ ìˆìœ¼ë©´ ERC721 Tokenìœ¼ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤.
    - ERC721 CA ê°™ì€ ê²½ìš°ì—ëŠ” ê³µì‹ì ì¸ í˜•ì‹ì„ ì§€í‚¤ì§€ ì•Šê³  event êµ¬í˜„ ì‹œ indexedë¥¼ ë¹ ëœ¨ë¦¬ê³  êµ¬í˜„í•œ ì¼€ì´ìŠ¤ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
- ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ERC20 Tokenìœ¼ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤. ERC20ì´ ë³´í¸ì ìœ¼ë¡œëŠ” NFT itemì„ êµ¬ë§¤í•  ë•Œ ì‚¬ìš©í•œ currencyë¡œ ì‚¬ìš© ë˜ë‚˜, ì˜ˆì™¸ ì¼€ì´ìŠ¤ë¡œ ERC20 ìì²´ê°€ ê±°ë˜ ë˜ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤.

<aside>
<img src="https://www.notion.so/icons/sign-in_green.svg" alt="https://www.notion.so/icons/sign-in_green.svg" width="40px" /> - Topic1, Topic2, Topic3 ê°€ ëª¨ë‘ ë¹„ì–´ìˆëŠ” ê²½ìš° -> dataì— 32ë°”ì´íŠ¸(64ê¸€ì)ì”© parsingí•˜ì—¬ Topic1, 2, 3ì„ ì±„ì›€ â†’ ERC721 CA ê°œë°œìê°€ Eventì— indexedë¥¼ ëª¨ë‘ ë¹ ëœ¨ë¦¬ê³  êµ¬í˜„í•œ ì¼€ì´ìŠ¤
data[2:66] -> Topic2 -> seller
data[66:130] -> Topic3 -> buyer
data[130:194] -> Topic4 -> nft token id

- Topic1, Topic2, Topic3 ê°€ ëª¨ë‘ ì±„ì›Œì ¸ìˆëŠ” ê²½ìš°
Topic1 -> seller
Topic2 -> buyer
Topic3 -> nft token id

- Topic1, Topic2, Topic3 ë‹¤ ë¹„ì–´ìˆê±°ë‚˜, ë‹¤ ì±„ì›Œì ¸ìˆìœ¼ë©´ ERC721 ì •ë³´ ì„¸íŒ…
8. seller <- Topic1
9. buyer <- Topic2
10. nft_token_id <- Topic3
11. erc_standard <- "ERC721"

12. nft_contract_address <- contract address
13. nft_project_name <- ë³„ë„ë¡œ nftë“¤ì˜ ë©”íƒ€ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸” ê´€ë¦¬ í•„ìš”. nft contract addressì— ë”°ë¥¸ nft project nameì„ ì €ì¥í•˜ëŠ” ë°ì´í„°ë¥¼ í™•ë³´í•´ë‘ê³  í•´ë‹¹ í…Œì´ë¸”ì—ì„œ ì¡°íšŒí•˜ì—¬ ì €ì¥

14. number_of_items <- number_of_items + 1 (bundle ê±°ë˜ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê¸°ì¡´ ë°ì´í„°ì— +1)
15. trade_type <- number_of_itemsê°€ 1ê°œì´ë©´ "Single Item Trade", OrdersMatched ë‚˜ì˜¤ê¸° ì „ê¹Œì§€ ì—¬ëŸ¬ ê°œì˜ Transferê°€ ë‚˜ì˜¤ë©´(ì¦‰, ì—¬ëŸ¬ê°œì˜ NFTê°€ ê±°ë˜ë˜ë©´) "Bundle Trade"

16. nft_token_ids_array <- nft_token_idë¥¼ append
17. senders_array <- sellerë¥¼ append
18. recipients_array <- buyerë¥¼ append
19. erc_types_array <- erc_standardë¥¼ append
20. nft_contract_addresses_array <- nft_contract_addressë¥¼ append
21. erc_values_array <- í•„ìë„ duneì—ì„œ ë§Œë“  í•´ë‹¹ í•„ë“œì˜ ì˜ë¯¸ë¥¼ ì•Œ ìˆ˜ ì—†ìŒ, duneì—ì„œëŠ” '','',''... ì´ëŸ°ì‹ìœ¼ë¡œ ë“¤ì–´ê°€ ìˆëŠ”ë° ì˜ë¯¸ë¥¼ ëª¨ë¥´ê² ìŒ
- 16~21 dataëŠ” bundleì„ ìœ„í•´ ìˆëŠ” í•„ë“œ, singleì´ì–´ë„ 1ê°œê°€ append ë¨

22. original_currency <- "ETH"
23. original_currency_contract <- "zero address", dune ê¸°ì¤€ìœ¼ë¡œ original_currencyê°€ ETHì´ë©´ ì´ í•„ë“œëŠ” zero address
24. currency_contract <- "WETHì˜ contract address", dune ê¸°ì¤€ìœ¼ë¡œ original_currencyê°€ ETHì´ë©´ ì´ í•„ë“œëŠ” WETHì˜ contract address, ê·¸ ë°–ì—ë„ ë‹¤ì–‘í•œ ERC20ë“¤ì´ ë‚˜íƒ€ë‚¨
- 22~24 dataëŠ” defaultë¡œ ETHì— ëŒ€í•œ dataê°€ ë“¤ì–´ê°, ì´í›„ erc20ì— ëŒ€í•œ transferê°€ ë‚˜ì˜¤ë©´ erc20ìœ¼ë¡œ ëŒ€ì²´ë¨ â†’ ERC20 Transfer ì‚¬í›„ ì²˜ë¦¬ ì°¸ì¡°

</aside>

**Transfer Eventë¥¼ í†µí•œ data ì¶”ì¶œ ì´í›„ ì‘ì—…**

- Transfer Eventë¥¼ í†µí•œ ë°ì´í„° ì…ë ¥ì´ ëë‚œ í›„ erc_standard í•„ë“œë¥¼ ê²€ì‚¬í•©ë‹ˆë‹¤. ë§Œì•½ ERC721ì´ ì•„ë‹ˆë¼ë©´(ì¦‰, ERC20), tempDataì— í˜„ì¬ ë°ì´í„°ë¥¼ ë‹´ì•„ë‘ì–´ ì•„ë˜ì—ì„œ í™œìš©í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

```go
if nftTrade.ErcStandard != "erc721" {
	tempData = append(tempData, data)
}
```

**TransferSingle**

<aside>
<img src="https://www.notion.so/icons/sign-in_green.svg" alt="https://www.notion.so/icons/sign-in_green.svg" width="40px" /> Topic1 -> Operator
Topic2 -> Seller
Topic3 -> Buyer
data[2:66] -> NFT Token ID
data[66:130] -> NFT Token Count

8. seller <- Topic2
9. buyer <- Topic3
10. nft_token_id <- data[2:66]
11. erc_standard <- "ERC1155"

12. nft_contract_address <- contract address
13. nft_project_name <- ë³„ë„ë¡œ nftë“¤ì˜ ë©”íƒ€ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸” ê´€ë¦¬ í•„ìš”. nft contract addressì— ë”°ë¥¸ nft project nameì„ ì €ì¥í•˜ëŠ” ë°ì´í„°ë¥¼ í™•ë³´í•´ë‘ê³  í•´ë‹¹ í…Œì´ë¸”ì—ì„œ ì¡°íšŒí•˜ì—¬ ì €ì¥

14. number_of_items <- number_of_items + data[66:130] (bundle ê±°ë˜ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê¸°ì¡´ ë°ì´í„°ì— í•´ë‹¹ transferSingleì˜ item ê°œìˆ˜)
15. trade_type <- number_of_itemsê°€ 1ê°œì´ë©´ "Single Item Trade", OrdersMatched ë‚˜ì˜¤ê¸° ì „ê¹Œì§€ ì—¬ëŸ¬ê°œì˜ Transferê°€ ë‚˜ì˜¤ë©´(ì¦‰, ì—¬ëŸ¬ê°œì˜ NFTê°€ ê±°ë˜ë˜ë©´) "Bundle Trade"

16. nft_token_ids_array <- nft_token_idë¥¼ append
17. senders_array <- sellerë¥¼ append
18. recipients_array <- buyerë¥¼ append
19. erc_types_array <- erc_standardë¥¼ append
20. nft_contract_addresses_array <- nft_contract_addressë¥¼ append
21. erc_values_array <- í•„ìë„ duneì—ì„œ ë§Œë“  í•´ë‹¹ í•„ë“œì˜ ì˜ë¯¸ë¥¼ ì•Œ ìˆ˜ ì—†ìŒ, duneì—ì„œëŠ” '','',''... ì´ëŸ°ì‹ìœ¼ë¡œ ë“¤ì–´ê°€ ìˆëŠ”ë° ì˜ë¯¸ë¥¼ ëª¨ë¥´ê² ìŒ
- 16~21 dataëŠ” bundleì„ ìœ„í•´ ìˆëŠ” í•„ë“œ, singleì´ì–´ë„ 1ê°œê°€ append ë¨

22. original_currency <- "ETH"
23. original_currency_contract <- "zero address", dune ê¸°ì¤€ìœ¼ë¡œ original_currencyê°€ ETHì´ë©´ ì´ í•„ë“œëŠ” zero address
24. currency_contract <- "WETHì˜ contract address", dune ê¸°ì¤€ìœ¼ë¡œ original_currencyê°€ ETHì´ë©´ ì´ í•„ë“œëŠ” WETHì˜ contract address, ê·¸ ë°–ì—ë„ ë‹¤ì–‘í•œ ERC20ë“¤ì´ ë‚˜íƒ€ë‚¨
- 22~24 dataëŠ” defaultë¡œ ETHì— ëŒ€í•œ dataê°€ ë“¤ì–´ê°, ì´í›„ erc20ì— ëŒ€í•œ transferê°€ ë‚˜ì˜¤ë©´ erc20ìœ¼ë¡œ ëŒ€ì²´ë¨ â†’ ERC20 Transfer ì‚¬í›„ ì²˜ë¦¬ ì°¸ì¡°

</aside>

**OrdersMatched**

- OrersMatched Eventë¥¼ ë§Œë‚˜ë©´ tempData(Transfer Eventì—ì„œ ERC721ì´ ì•„ë‹ˆì–´ì„œ ì €ì¥í•´ë‘” data)ê°€ ë¹„ì–´ìˆì§€ ì•Šë‹¤ë©´ ì•„ë˜ ë¡œì§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    - ERC20 Transfer ì‚¬í›„ ì²˜ë¦¬
        - erc_standard ê°€ ERC721 or ERC1155 ì´ë©´ tempDataë¡œ currency ê´€ë ¨ëœ ì •ë³´ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.
        
        <aside>
        <img src="https://www.notion.so/icons/sign-in_green.svg" alt="https://www.notion.so/icons/sign-in_green.svg" width="40px" /> 22. original_currency <- ë³„ë„ë¡œ contract addressì— ë”°ë¥¸ tokenì˜ ë©”íƒ€ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸” ê´€ë¦¬ í•„ìš”. contract addressì— ë”°ë¥¸ token symbolì„ ì €ì¥í•˜ëŠ” ë°ì´í„°ë¥¼ í™•ë³´í•´ë‘ê³  í•´ë‹¹ í…Œì´ë¸”ì—ì„œ ì¡°íšŒí•˜ì—¬ ì €ì¥
        23. original_currency_contract <- contract address, dune ê¸°ì¤€ìœ¼ë¡œ original_currencyê°€ ERC20ë©´ ì´ í•„ë“œëŠ” ERC20ì˜ contract address
        24. currency_contract <- contract address, dune ê¸°ì¤€ìœ¼ë¡œ original_currencyê°€ ERC20ë©´ ì´ í•„ë“œëŠ” ERC20ì˜ contract address
        - 22~24 dataëŠ” defaultë¡œ ETHì— ëŒ€í•œ dataê°€ ë“¤ì–´ê°, ì´í›„ í•´ë‹¹ ê³¼ì •ì—ì„œ erc20ì— ëŒ€í•œ ì •ë³´ë¡œ ëŒ€ì²´ë¨
        
        </aside>
        
- OrdersMatched
    - OrdersMatched ê±´ë§ˆë‹¤ bulk countë¥¼ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.
    - í•œ Tx hash ë‚´ì— ì—¬ëŸ¬ ê°œì˜ OrdersMatchedê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<aside>
<img src="https://www.notion.so/icons/sign-in_green.svg" alt="https://www.notion.so/icons/sign-in_green.svg" width="40px" /> Topic2 -> Maker
Topic3 -> Take
Topic4 -> MetaData
data[2:66] -> buyHash
data[66:130] -> sellHash
data[130:] -> raw amount

25. platform <- "OpenSea"
26. evt_type <- "Trade"
27. category <- "Buy", "Sell", Takerê°€ ìœ„ì˜ transferë‚˜ transferSingleì—ì„œ sellerì´ë©´ Sell, buyerì´ë©´ Buy

28. exchange_contract_address <- contract_address
29. platform_version <- contract_addressì— ë”°ë¼ v1, v2 êµ¬ë¶„

30. original_amount_raw <- data[130:]
31. original_amount <- original_amount_raw / 10^(erc20 tokenì˜ decimals) ë¡œ ê³„ì‚°
32. usd_amount <- original_amount * (block_time ë•Œ í•´ë‹¹ erc20ì˜ usd ê°€ê²©) ë¡œ ê³„ì‚°
33. trade_id <- single, bundle, bulkì— ë”°ë¥¸ trade id ê°’ ì–´ë–»ê²Œ ê³„ì‚°í•  ê²ƒì¸ê°€

</aside>

<aside>
ğŸ’¡ **Makerì™€ Taker**
Maker: ê±°ë˜ë¥¼ ë§Œë“  ì‚¬ëŒ
Taker: ê±°ë˜ë¥¼ ìˆ˜ë½í•œ ì‚¬ëŒ

Makerê°€ Sellerì´ê³ , Takerê°€ Buyerì´ë©´ í•´ë‹¹ ê±°ë˜ëŠ” Buy ì…ë‹ˆë‹¤.
Makerê°€ Buyerì´ê³ , Takerê°€ Sellerì´ë©´ í•´ë‹¹ ê±°ë˜ëŠ” Sell ì…ë‹ˆë‹¤.

</aside>

- í˜„ì¬ TX Hashì— ëŒ€í•œ ë¡œì§ì´ ëª¨ë‘ ì²˜ë¦¬ë˜ì—ˆì„ ë•Œ bulk countê°€ 1ë³´ë‹¤ í¬ë©´ í˜„ì¬ Tx hashì˜ NFT ê±°ë˜ ë°ì´í„°ì˜ trade typeì„ ëª¨ë‘ "Bundle Trade"ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
- wyvernì—ì„œëŠ” bulk ê±°ë˜ëŠ” ì—†ê³ , ëª¨ë‘ bundleë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

**í˜„ì¬ ê±°ë˜ê±´(TX Hash)ì— ëŒ€í•œ ë°ì´í„°ê°€ ëª¨ë‘ ì±„ì›Œì§€ë©´ nft ê±°ë˜ ë°ì´í„°ë¥¼ nft_trades í…Œì´ë¸”ì— ì €ì¥í•©ë‹ˆë‹¤.**

ì „ì²´ì ìœ¼ë¡œ ìœ„ì˜ ìˆ˜ì§‘, ë¶„ì„, ì ì¬í•˜ëŠ” ì¼ë ¨ì˜ ê³¼ì •ì„ TX Hash ê¸°ì¤€ìœ¼ë¡œ ë°˜ë³µí•˜ì—¬, OpenSea Wyvern Protocolì„ í†µí•´ ì´ë£¨ì–´ì§„ NFT ê±°ë˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# ë§ˆì¹˜ë©°

---

OpenSeaì˜ Wyvern Protocolì„ í†µí•œ ê±°ë˜ ë°ì´í„° ë¶„ì„ì„ í†µí•´ OpenSeaì˜ ê±°ë˜ëŸ‰, Top NFT, Top Trader ë“±ì˜ ì§€í‘œë“¤ì„ ë¶€ê°€ì ìœ¼ë¡œ ì‚°ì¶œí•  ìˆ˜ ìˆì—ˆê³ , ì´ë¥¼ í†µí•´ ìŸê¸€ì˜ ì• ë„ë¦¬í‹±ìŠ¤ì— ë‹¤ì–‘í•œ ì§€í‘œë“¤ì— í™œìš©í•  ìˆ˜ ìˆì—ˆë‹¤.

ìŸê¸€ì˜ ë°±ì—”ë“œ ê°œë°œíŒ€ì€ ë†’ì€ ë¸”ë¡ì²´ì¸ ì´í•´ë„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¸”ë¡ì²´ì¸ ë°ì´í„°ì— ëŒ€í•œ ë‹¤ì–‘í•œ ë¦¬ì„œì¹˜ë¥¼ í†µí•´ ì´ë¥¼ ìˆ˜ì§‘, ë¶„ì„, ê°€ê³µ, ì ì¬í•˜ì—¬ ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ì— í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ìŸê¸€ì˜ ë°±ì—”ë“œ ê°œë°œíŒ€ì€ ë¸”ë¡ì²´ì¸ ë„ë©”ì¸ì—ì„œ ë¸”ë¡ì²´ì¸ ë°ì´í„°ì˜ ë¶„ì„ ë° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê²½í—˜ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ì¼ë°˜ì ì¸ ë°±ì—”ë“œ ê°œë°œ ê¸°ìˆ ë„ ìˆ™ë ¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê²½í—˜ ë•ë¶„ì— ìŸê¸€ì˜ ë°±ì—”ë“œ ê°œë°œíŒ€ì€ ì§€ì†ì ìœ¼ë¡œ ë†’ì€ ìˆ˜ì¤€ì˜ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.

# ì°¸ê³ 

---

## Trade Type

<aside>
ğŸ’¡ **Single Item Trade**

- ERC721 : 1ê°œ
- ERC1155 : 1ê°œ ì´ìƒ

**Bundle Trade**

- í•œ í¬ì¥ ì•ˆì— ì—¬ëŸ¬ê°œì˜ ìƒí’ˆì´ ë“¤ì–´ìˆë‹¤ê³  ìƒê°í•˜ë©´ ë¨
- ì˜ˆì‹œ : ì¥ë°”êµ¬ë‹ˆì— ì—¬ëŸ¬ NFTë¥¼ ë„£ì–´ì„œ í•œë²ˆì— êµ¬ë§¤
- 1ê±´ì˜ ê±°ë˜ì—ì„œ ì—¬ëŸ¬ê°œì˜ NFTê°€ ë¬¶ì—¬ì„œ ê±°ë˜ë¨
- ordersmatched(wyvern) / orderfulfilled(seaport) 1ê°œ

**Bulk Purchase**

- ê°ê° í¬ì¥ëœ ìƒí’ˆì„ í…Œì´í”„ë¡œ ë¬¶ì—ˆë‹¤ê³  ìƒê°í•˜ë©´ ë¨
- 1ê°œì˜ TXì—ì„œ ë³„ê°œì˜ ê±°ë˜ê±´ë“¤ì´ ë¬¶ì—¬ ìˆìŒ
- seaportì—ë§Œ ìˆëŠ” trade type
- orderfulfilled(seaport) ê°€ ì—¬ëŸ¬ê°œ
</aside>

## Event Name Hex Signature

- ìœ ìš©í•œ ì‚¬ì´íŠ¸ - Event Signatures: [https://www.4byte.directory/event-signatures/](https://www.4byte.directory/event-signatures/)

| ë¶„ë¥˜ | Event Name | Hex Signature |
| --- | --- | --- |
| ERC20,ERC1155 | Approval(address,address,uint256) | 0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925 |
| ERC20,ERC721 | Transfer(address,address,uint256) | 0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef |
| ERC1155 | TransferSingle(address,address,address,uint256,uint256) | 0xc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62 |
| ERC1155 | TransferBatch(address,address,address,uint256[],uint256[]) | 0x4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb |
| ERC721,ERC1155 | ApprovalForAll(address,address,bool) | 0x17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31 |
| ERC1155 | URI(string,uint256) | 0x6bb7ff708619ba0610cba295a58592e0451dee2622938c8755667688daf3529b |
| Wyvern | OrdersMatched(bytes32,bytes32,address,address,uint256,bytes32) | 0xc4109843e0b7d514e4c093114b863f8e7d8d9a458c372cd51bfe526b588006c9 |

# Reference

---

## Ethereum ê³µì‹

ERC20 Token Standard: [https://eips.ethereum.org/EIPS/eip-20](https://eips.ethereum.org/EIPS/eip-20)

ERC721 NFT Standard: [https://eips.ethereum.org/EIPS/eip-721](https://eips.ethereum.org/EIPS/eip-721)

ERC1155 Multi Token Standard: [https://eips.ethereum.org/EIPS/eip-1155](https://eips.ethereum.org/EIPS/eip-1155)

Etherscan: [https://etherscan.io/](https://etherscan.io/)

dune: [https://dune.com/browse/dashboards](https://dune.com/browse/dashboards)

## OpenSea ê³µì‹

OpenSea Docs v1(wyvern): [https://docs.opensea.io/](https://docs.opensea.io/)

OpenSea Docs v2(seaport): [https://docs.opensea.io/v2.0/](https://docs.opensea.io/v2.0/)

OpenSea Github: [https://github.com/ProjectOpenSea/seaport](https://github.com/ProjectOpenSea/seaport)

OpenSea Blog: [https://opensea.io/blog/](https://opensea.io/blog)

OpenSea ERC1155 ê±°ë˜ ì§€ì›: [https://opensea.io/blog/announcements/erc1155-marketplace/](https://opensea.io/blog/announcements/erc1155-marketplace/)

OpenSea Bundles: [https://opensea.io/blog/announcements/introducing-bundles/](https://opensea.io/blog/announcements/introducing-bundles/)

OpenSea Wyvern V1ìœ¼ë¡œ Market ì‹œì‘: [https://opensea.io/blog/announcements/bid-on-your-favorite-crypto-collectibles/](https://opensea.io/blog/announcements/bid-on-your-favorite-crypto-collectibles/)

OpenSea Wyvern V2 ì—…ê·¸ë ˆì´ë“œ: [https://opensea.io/blog/announcements/announcing-a-contract-upgrade/](https://opensea.io/blog/announcements/announcing-a-contract-upgrade/)

OpenSea Wyvern 2.3 Protocol: [https://opensea.io/blog/developers/wyvern-2-3-developer-upgrade-guide/](https://opensea.io/blog/developers/wyvern-2-3-developer-upgrade-guide/)

OpenSea Seaport Protocol Migration: [https://opensea.io/blog/announcements/launching-seaport-saving-the-community-millions-in-fees/](https://opensea.io/blog/announcements/launching-seaport-saving-the-community-millions-in-fees/)

OpenSea Seaport Protocol: [https://opensea.io/blog/announcements/introducing-seaport-protocol/](https://opensea.io/blog/announcements/introducing-seaport-protocol/)